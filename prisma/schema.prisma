// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Patient {
  id                    Int      @id @default(autoincrement())
  names                 String
  surnames              String
  identification_number String
  nationality           String
  birth_date            DateTime
  chronological_age     Float
  gender                String
  birth_place           String?
  marital_status        String?
  occupation            String?
  address               String?
  country               String?
  state_province        String?
  city                  String?
  phone_number          String?
  email                 String?
  blood_type            String?
  general_observations  String?
  photo_url             String?
  history_date          String?
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt

  biophysical_tests BiophysicalTest[]

  @@map("patients")
}

model BiophysicalTest {
  id                Int      @id @default(autoincrement())
  patient_id        Int
  chronological_age Float
  biological_age    Float
  differential_age  Float
  gender            String
  is_athlete        Boolean
  measurements      String
  partial_ages      String
  test_date         DateTime
  created_at        DateTime @default(now())
  updated_at        DateTime @updatedAt

  patient Patient @relation(fields: [patient_id], references: [id])

  @@map("biophysical_tests")
}

model Range {
  id     Int   @id @default(autoincrement())
  minAge Float @map("min_age")
  maxAge Float @map("max_age")

  boards Board[]

  @@map("ranges")
}

model Board {
  id      Int     @id @default(autoincrement())
  rangeId Int     @map("range_id")
  name    String
  minVal  String  @map("min_val")
  maxVal  String  @map("max_val")
  inverse Boolean @default(false)

  range Range @relation(fields: [rangeId], references: [id])

  @@map("boards")
}